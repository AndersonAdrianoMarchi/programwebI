<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Exercício 7 — Financiamento</title>
  <style>
    body{font-family:Arial,Helvetica,sans-serif;margin:18px}
    label{display:block;margin-top:8px}
    input[type=number]{width:160px;padding:6px}
    .resultado{margin-top:12px}
  </style>
</head>
<body>
  <h2>Exercício 7 — Juros do financiamento</h2>

  <form id="finForm" action="ex7.php" method="post">
    <label for="avista">Preço à vista (R$):</label>
    <input id="avista" name="avista" type="number" step="any" required value="22500">

    <label for="parcelas">Número de parcelas:</label>
    <input id="parcelas" name="parcelas" type="number" step="1" required value="60">

    <label for="valor_parcela">Valor da parcela (R$):</label>
    <input id="valor_parcela" name="valor_parcela" type="number" step="any" required value="489.65">

    <br><br>
    <button type="submit">Calcular Juros</button>
  </form>

  <div id="resultado" class="resultado" aria-live="polite"></div>

  <script>
    document.getElementById('finForm').addEventListener('submit', function (e) {
      e.preventDefault();
      const form = e.target;
      const data = new FormData(form);

      fetch(form.action, { method: 'POST', body: data, headers: { 'X-Requested-With': 'XMLHttpRequest' } })
        .then(r => r.text())
        .then(html => document.getElementById('resultado').innerHTML = html)
        .catch(() => document.getElementById('resultado').innerHTML = '<p style="color:red">Erro ao calcular. Tente novamente.</p>');
    });
  </script>
</body>
</html>
